{"is_source_file": true, "format": "Java", "description": "This Java class implements the UserDetailsService interface for Spring Security, loading user details from the database. It retrieves user information by email, handles roles and authorities, and constructs a UserDetails object for authentication purposes.", "external_files": ["com/example/invoicebackend/model/User.java", "com/example/invoicebackend/model/Role.java", "com/example/invoicebackend/repository/UserRepository.java", "org.springframework.security.core.userdetails.UserDetailsService.java", "org.springframework.security.core.userdetails.UserDetails.java", "org.springframework.security.core.userdetails.UsernameNotFoundException.java", "org.springframework.security.core.GrantedAuthority.java", "org.springframework.security.core.authority.SimpleGrantedAuthority.java", "org.springframework.stereotype.Service.java"], "external_methods": ["users.findByEmail(String username)", "u.getRoles()", "Role.getName()", "u.getEmail()", "u.getPasswordHash()", "u.getStatus()", "u.isDeleted()"], "published": ["com.example.invoicebackend.service.CustomUserDetailsService"], "classes": [{"name": "CustomUserDetailsService", "description": "A service class that loads user-specific data for Spring Security authentication by fetching user details from the database."}], "methods": [{"name": "loadUserByUsername", "description": "Loads user details by username (email), constructs authorities based on roles, and returns a UserDetails object for authentication."}], "calls": ["users.findByEmail", "u.getRoles", "Role.getName", "org.springframework.security.core.userdetails.User.withUsername", "u.getEmail", "u.getPasswordHash", "u.isDeleted", "org.springframework.security.core.userdetails.User.build"], "search-terms": ["CustomUserDetailsService", "loadUserByUsername", "UserRepository", "Spring Security", "UserDetailsService", "roles", "authorities", "UserDetails", "User"], "state": 2, "file_id": 17, "knowledge_revision": 38, "git_revision": "", "hash": "6c0b84acfd7b9612df6fa7ef1dc68378", "format-version": 4, "code-base-name": "invoice_backend", "filename": "invoice_backend/src/main/java/com/example/invoicebackend/service/CustomUserDetailsService.java", "revision_history": [{"38": ""}]}