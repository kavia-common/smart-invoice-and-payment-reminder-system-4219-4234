{"is_source_file": true, "format": "Java", "description": "This file defines the `AnalyticsService` class in Java, which provides methods to compute KPIs and time-series aggregations related to invoices, payments, and partners within an invoice management system.", "external_files": ["com.example.invoicebackend.model.Invoice", "com.example.invoicebackend.model.Partner", "com.example.invoicebackend.model.Payment", "com.example.invoicebackend.model.enums.InvoiceStatus", "com.example.invoicebackend.model.enums.PaymentStatus", "com.example.invoicebackend.repository.InvoiceRepository", "com.example.invoicebackend.repository.PartnerRepository", "com.example.invoicebackend.repository.PaymentRepository", "com.example.invoicebackend.web.dto.AnalyticsDtos.SummaryResponse", "com.example.invoicebackend.web.dto.AnalyticsDtos.TimeseriesPoint", "com.example.invoicebackend.web.dto.AnalyticsDtos.TimeseriesResponse", "org.springframework.stereotype.Service", "org.springframework.transaction.annotation.Transactional"], "external_methods": ["invoiceRepository.findAll()", "invoiceRepository.findByPartnerAndDeletedFalse()", "paymentRepository.findByInvoiceAndStatus()", "partnerRepository.findById()"], "published": ["getSummary", "getTimeseries"], "classes": [{"name": "AnalyticsService", "description": "A service component in Spring for calculating financial analytics, KPIs, and time-series data related to invoices and payments."}], "methods": [{"name": "getSummary", "description": "Computes key performance indicators (KPIs) including total outstanding, average payment delay, on-time payment rate, and invoice status counts within optional filters."}, {"name": "getTimeseries", "description": "Generates time-series data for specified metrics ('invoiced' or 'paid') over a date range, filling missing months with zeroes."}, {"name": "listInvoices", "description": "Retrieves invoices for all or a specific partner, excluding deleted invoices."}, {"name": "applyInvoiceFilters", "description": "Filters invoices based on date range and status."}, {"name": "buildInvoicedSeries", "description": "Creates a monthly time-series of invoiced amounts."}, {"name": "buildPaidSeries", "description": "Creates a monthly time-series of paid amounts."}, {"name": "fillMissingMonths", "description": "Ensures the time-series covers the entire date range, filling in months with no data with zeroes."}], "calls": ["invoiceRepository.findAll()", "invoiceRepository.findByPartnerAndDeletedFalse()", "paymentRepository.findByInvoiceAndStatus()", "partnerRepository.findById()"], "search-terms": ["AnalyticsService", "invoice KPIs", "payment time-series", "partner-specific analytics", "invoice filters", "monthly aggregation", "payment delay", "on-time rate", "metrics", "time-series filling"], "state": 2, "file_id": 80, "knowledge_revision": 188, "git_revision": "", "hash": "5ec4d78a350b4d53d2496ee2fca431f2", "format-version": 4, "code-base-name": "invoice_backend", "filename": "invoice_backend/src/main/java/com/example/invoicebackend/service/AnalyticsService.java", "revision_history": [{"188": ""}]}