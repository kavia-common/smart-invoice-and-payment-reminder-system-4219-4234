{"is_source_file": true, "format": "Java", "description": "This class handles file uploads/downloads via a pluggable storage provider and persists metadata for file attachments within the invoice backend system.", "external_files": ["com.example.invoicebackend.model.FileAttachment", "com.example.invoicebackend.model.Invoice", "com.example.invoicebackend.model.Partner", "com.example.invoicebackend.repository.FileAttachmentRepository", "com.example.invoicebackend.repository.InvoiceRepository", "com.example.invoicebackend.repository.PartnerRepository", "com.example.invoicebackend.service.storage.StorageProvider", "org.springframework.stereotype.Service", "org.springframework.transaction.annotation.Transactional", "org.springframework.web.multipart.MultipartFile", "java.io.InputStream", "java.time.Instant"], "external_methods": ["partners.findById(Long)", "invoices.findById(Long)", "storage.save(String, InputStream, long, String)", "attachments.save(FileAttachment)", "storage.open(String)"], "published": ["upload", "findAttachment", "openStream"], "classes": [{"name": "FileService", "description": "Service class responsible for managing file uploads, downloads, and metadata persistence."}], "methods": [{"name": "upload", "description": "Uploads a file associated with a partner and optionally an invoice, saving metadata and file content."}, {"name": "findAttachment", "description": "Retrieves metadata for a file attachment by its ID."}, {"name": "openStream", "description": "Opens an input stream to read the file content from storage given a FileAttachment object."}], "calls": ["partners.findById", "invoices.findById", "storage.save", "attachments.save", "storage.open"], "search-terms": ["FileService", "file upload", "storage provider", "file attachment", "invoice backend", "metadata persistence", "MultipartFile"], "state": 2, "file_id": 68, "knowledge_revision": 149, "git_revision": "", "hash": "2e89914ea25ee874a7c81b57568df5f1", "format-version": 4, "code-base-name": "invoice_backend", "filename": "invoice_backend/src/main/java/com/example/invoicebackend/service/FileService.java", "revision_history": [{"149": ""}]}