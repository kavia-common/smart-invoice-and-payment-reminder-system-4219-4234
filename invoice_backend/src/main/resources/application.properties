spring.application.name=invoicebackend

# Default to 'dev' profile which uses H2 in-memory + Flyway
spring.profiles.active=dev

# Common JPA and Hibernate settings
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
# For profile-specific ddl-auto, see application-*.properties; validate for dev to ensure Flyway controls schema
# spring.jpa.hibernate.ddl-auto is profile-specific

# Flyway common settings (enabled by default; will pick up profile-specific datasource)
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
# Allow creating schema automatically if not present (Postgres)
spring.flyway.create-schemas=true
# For Postgres schema selection, see application-prod.properties

# Actuator Configuration (keep available)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.probes.enabled=true

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# Respect X-Forwarded-* / Forwarded headers so redirects preserve external scheme/host/port
server.forward-headers-strategy=framework

# ====== Application Security Settings ======
# IMPORTANT: These must be set in environment for production. Do not hardcode secrets.
# Set via container env: JWT_SECRET, JWT_EXP_MINUTES, ADMIN_EMAIL, ADMIN_PASSWORD
app.jwt.secret=${JWT_SECRET:change-this-in-env-please-change-to-long-random}
app.jwt.exp.minutes=${JWT_EXP_MINUTES:60}
app.admin.email=${ADMIN_EMAIL:}
app.admin.password=${ADMIN_PASSWORD:}

# CORS placeholder (comma-separated)
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:*}

# ====== Storage Settings (env-driven) ======
# STORAGE_PROVIDER: local | s3 | azure (default local)
app.storage.provider=${STORAGE_PROVIDER:local}
# Local storage base path (used when provider=local)
app.storage.local.path=${STORAGE_LOCAL_PATH:attachments}
# S3 (only read when provider=s3)
app.storage.s3.bucket=${S3_BUCKET:}
app.storage.s3.region=${S3_REGION:}
app.storage.s3.accessKey=${S3_ACCESS_KEY:}
app.storage.s3.secretKey=${S3_SECRET_KEY:}
# Azure (only read when provider=azure)
app.storage.azure.connection=${AZURE_CONN:}
